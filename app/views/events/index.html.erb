

<section class="text-gray-600 body-font">
  <div class="container-fluid px-5 -mb-5 mx-auto max-w-7x1" >
    <div class="flex flex-wrap w-full p-4" >
      <div class="w-full mb-6 lg:mb-0" >
        <%= image_tag('GHCC-Color-Logo_Events.svg', width: '50%') %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4" style="overflow-y: scroll !important;">
        <% @events.each do |event| %>
          <div class="">
            <%= turbo_frame_tag dom_id(event) do %>
              <div class=" p-6 rounded-lg border mb-2" style="background-color: #eff2f6" >
                <h3 class="tracking-widest text-indigo-500 text-xs font-medium title-font"><%= event.event_details['recurrence_description'] %></h3>
                <h2 class="text-lg text-gray-900 font-medium title-font mb-4"><%= event.event_details['name'] %></h2>
                <div class="h-1 -mt-2 w-20 bg-indigo-500 rounded"></div>
                <div class="accordion accordion-flush" id="accordion<%=dom_id(event) %>">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-heading<%=dom_id(event) %>">
                      <button class="text-indigo-500 accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-<%=dom_id(event) %>" aria-expanded="false" aria-controls="flush-<%=dom_id(event) %>">
                        See Details
                      </button>
                    </h2>
                    <div id="flush-<%=dom_id(event) %>" class="accordion-collapse collapse" aria-labelledby="flush-heading<%=dom_id(event) %>" data-bs-parent="#accordion<%=dom_id(event) %>">
                      <div class="accordion-body">
                        <% if event.event_details['description'].nil? %>
                        <% else %>
                          <p class="mt-4 leading-relaxed text-base"><%= event.event_details['description'].html_safe %></p>
                        <% end %>
                        <% if event.event_details['location'].nil? %>
                        <% else %>
                          <p class="mt-4 leading-relaxed text-sm">Location: <%= event.event_details['location']['name'].present? ? event.event_details['location']['name'] : '' %> - <%= event.event_details['location']['street_address'].present? ? event.event_details['location']['street_address'] : '' %><br>
                            <%= event.event_details['location']['city'].present? ? event.event_details['location']['city'] : '' %>, <%= event.event_details['location']['state'].present? ? event.event_details['location']['state'] : '' %> <%= event.event_details['location']['name'].present? ? event.event_details['location']['zip'] : '' %>
                          </p>
                        <% end %>
                        <% if event.event_details['registration'].nil? %>
                        <% else %>
                          <% if event.event_details['registration']['forms'].nil? %>
                          <% else %>
                            <% if event.event_details['registration']['forms']['registration_form'][0].nil? %>
                              <% if event.event_details['registration']['forms']['registration_form']['url'].nil? %>
                              <% else %>
                                <a href='<%= event.event_details['registration']['forms']['registration_form']['url'] %>'
                                   class="btn btn-small btn-info">Register</a>

                              <%end %>
                            <% else %>
                              <% event.event_details['registration']['forms']['registration_form'].each do |e| %>
                                <p class="mt-4 leading-relaxed text-base">
                                  <a href='<%=  e['url'] %>'
                                     class="btn btn-small btn-info">Register</a></p>
                              <% end %>

                            <% end %>
                          <% end %>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
      <div class="col-md-8" >
        <div class="container-fluid ">
          <div id="carouselExampleCaptions" class="carousel slide  p-6 rounded-lg border mb-2" data-bs-ride="carousel" style="background-color: #eff2f6;position: fixed;
            width: 60%;">
            <div class="carousel-indicators">
              <% @events.each_with_index do |event, i| %>
                <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="<%= i %>" class="<%= i  == 0 ? 'active': ''%>" aria-current="<%= i  == 0 ? 'true': ''%>" aria-label="Slide <%= i %>"></button>
              <% end %>
            </div>
            <div class="carousel-inner">
              <% @events.each_with_index do |event, i| %>
                <div class="carousel-item <%= i  == 0 ? 'active': ''%>" data-bs-interval="5000">
                  <img max-height="40%" class="d-block w-100" src="<%= event.event_details['image'] %>" alt="<%= event.event_details['name'] %>">
                  <h3 class="tracking-widest text-indigo-500 text-xs font-medium title-font"><%= event.event_details['recurrence_description'] %></h3>
                  <h2 class="text-lg text-gray-900 font-medium title-font mb-4"><%= event.event_details['name'] %></h2>
                  <div class="h-1 -mt-2 w-20 bg-indigo-500 rounded"></div>
                  <% if event.event_details['description'].nil? %>
                  <% else %>
                    <p class="mt-4 leading-relaxed text-base"><%= event.event_details['description'].html_safe %></p>
                  <% end %>
                </div>
              <% end %>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
</section>